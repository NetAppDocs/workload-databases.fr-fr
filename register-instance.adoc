---
sidebar: sidebar 
permalink: register-instance.html 
keywords: manage, register, Microsoft SQL Server instance, Oracle database, manage database, manage instance 
summary: 'Enregistrez les ressources afin de pouvoir surveiller l"état des ressources, leur utilisation, leur protection et les performances de stockage dans NetApp Workload Factory for Databases.' 
---
= Enregistrer des ressources dans NetApp Workload Factory pour les bases de données
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Enregistrez des instances pour Microsoft SQL Server et des bases de données pour Oracle afin de pouvoir surveiller l'état des instances et des bases de données, l'utilisation des ressources, la protection et les performances de stockage dans NetApp Workload Factory for Databases.

Vous pouvez enregistrer vos ressources uniquement si elles s'exécutent sur le stockage de système de fichiers FSx for ONTAP.



== À propos de la tâche

L'enregistrement d'une instance (SQL Server) ou d'une base de données (Oracle) comporte trois étapes : l'authentification de l'instance ou de la base de données, l'authentification FSx for ONTAP, et la préparation. La préparation consiste à s'assurer que tous les modules AWS, NetApp et PowerShell sont installés sur l'instance ou la base de données, et que les exigences minimales pour les fonctionnalités de Workload Factory for Databases telles que link:analyze-error-logs.html["analyse des journaux d'erreurs"] ou link:optimize-configurations.html["revue bien architecturée"] sont respectées.

Workload Factory prend uniquement en charge l'enregistrement et la gestion des instances Microsoft SQL Server et des bases de données Oracle.  Selon les informations d’identification du compte AWS que vous sélectionnez dans Workload Factory, les hôtes PostgreSQL peuvent apparaître dans l’inventaire.  Actuellement, Workload Factory prend en charge les instances PostgreSQL non enregistrées exécutées uniquement sur les systèmes d’exploitation Amazon Linux.



== Avant de commencer

L'hôte de l'instance ou de la base de données doit figurer dans l'inventaire. Pour que les hôtes apparaissent dans l'inventaire, vous devez link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["accorder les autorisations de _consultation, de planification et d'analyse_"^] dans votre compte AWS.



=== Enregistrement d'une instance dans un réseau privé

Pour enregistrer une instance (SQL Server) ou une base de données (Oracle) dans un réseau privé sans connectivité externe, les points de terminaison suivants doivent être disponibles dans le VPC avec une association aux sous-réseaux où les serveurs SQL sont présents.  Assurez-vous que les points de terminaison de l’interface autorisent le port 443 dans le groupe de sécurité attaché.

* `S3 Gateway/endpoint`
* `ssm`
* `ssmmessages`
* `fsx`
+
Si vous utilisez un serveur proxy pour toutes les connexions sortantes des instances EC2, vous devez autoriser l'accès aux domaines suivants afin que les opérations de gestion fonctionnent :

* ``.microsoft.com``(Serveur SQL)
* ``.powershellgallery.com``(Serveur SQL)
* ``.aws.amazon.com``
* ``.amazonaws.com``




== Enregistrer une instance Microsoft SQL Server

L'enregistrement d'une instance comporte trois étapes : l'authentification de l'instance, l'authentification FSx for ONTAP et la préparation pour compléter les prérequis manquants. Vous pouvez enregistrer une ou plusieurs instances.

Workload Factory prend en charge l'enregistrement pour Failover Cluster Instance (FCI) et le déploiement autonome pour SQL Server.

.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Sélectionnez le menu image:workloads-menu-icon.png["L'icône du menu hamburger permet d'accéder aux charges de travail telles que le stockage, l'analyse de données d'entreprise (EDA), l'intelligence artificielle (IA), les bases de données, VMware et l'administration."] puis sélectionnez *Bases de données*.
. Dans le menu Bases de données, sélectionnez *Inventaire*.
. Dans l’inventaire, sélectionnez *Microsoft SQL Server* comme type de moteur.
. Sélectionnez l'onglet *Instances*.
. Sélectionnez pour enregistrer une seule instance ou plusieurs instances.
. Pour authentifier les instances (étape 1), procédez comme suit, puis sélectionnez *Next* :
+
** Sélectionnez *Utiliser les mêmes informations d'identification pour toutes les instances* ou *Gérer les informations d'identification manuellement*.
** Authentifiez SQL Server et Windows en fournissant les informations de nom d'utilisateur et de mot de passe.
+
Si les instances sont authentifiées, sélectionnez *Next*.



. Pour authentifier FSx pour ONTAP (étape 2), procédez comme suit :
+
** Sélectionnez *Utiliser les mêmes informations d'identification pour toutes les ressources* ou *Gérer les informations d'identification manuellement*.
** Saisissez le nom d'utilisateur et le mot de passe du système de fichiers FSx for ONTAP, puis sélectionnez *Suivant*.
+
Si le système de fichiers FSx for ONTAP est authentifié, sélectionnez *Suivant*.



. Pour préparer (étape 3), assurez-vous que l'instance (ou les instances) répond(ent) aux exigences minimales.
+
Pour satisfaire aux exigences minimales, l'instance doit disposer des modules AWS et NetApp PowerShell ainsi que des modules PowerShell 7 installés, et vous devez remplir les prérequis pour au moins une des fonctionnalités listées sous Vérification des prérequis. .. Consultez les prérequis dans la vue *Vérification des prérequis*.

+
+ Vous devez remplir toutes les conditions préalables pour une seule fonctionnalité comme *Examiner les problèmes et recommandations bien architecturés* afin d'enregistrer l'instance.

+
.. Sélectionnez *Détails de configuration* pour chaque fonctionnalité afin de connaître les prérequis de la fonctionnalité et suivez les instructions à l'écran pour compléter tout prérequis manquant pour une fonctionnalité.
+
Pour que Workload Factory link:optimize-configurations.html["examiner et corriger les problèmes bien architecturés"] pour vos instances, complétez toutes les conditions préalables listées sous les capacités *Examiner les problèmes et recommandations liés à une architecture correcte* et *Corriger les problèmes liés à une architecture correcte*.



. Une fois les prérequis remplis, *Enregistrez* la ou les instance(s).


.Résultat
L'enregistrement de l'instance est lancé. Sélectionnez l'onglet *Suivi des tâches* pour suivre la progression.



== Enregistrer une base de données Oracle

L'enregistrement d'une instance comporte trois étapes : l'authentification de la base de données, l'authentification FSx pour ONTAP et la préparation pour compléter les prérequis manquants. Vous pouvez enregistrer une ou plusieurs bases de données.

.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Sélectionnez le menu image:workloads-menu-icon.png["L'icône du menu hamburger permet d'accéder aux charges de travail telles que le stockage, l'analyse de données d'entreprise (EDA), l'intelligence artificielle (IA), les bases de données, VMware et l'administration."] puis sélectionnez *Bases de données*.
. Dans le menu Bases de données, sélectionnez *Inventaire*.
. Dans l’inventaire, sélectionnez *Oracle* comme type de moteur.
. Sélectionnez l'onglet *Bases de données*.
. Sélectionnez pour enregistrer une seule base de données ou plusieurs bases de données.
. Pour authentifier les bases de données (étape 1), procédez comme suit :
+
** Sélectionnez *Utiliser les mêmes informations d'identification pour toutes les instances* ou *Gérer les informations d'identification manuellement*.
** Authentifiez l'utilisateur Oracle et l'utilisateur Automatic Storage Management (ASM) grid (le cas échéant) en fournissant les informations de nom d'utilisateur et de mot de passe.
+
Si les bases de données sont authentifiées, sélectionnez *Next*.



. Pour authentifier FSx pour ONTAP (étape 2), procédez comme suit, puis sélectionnez *Suivant* :
+
** Sélectionnez *Utiliser les mêmes informations d'identification pour toutes les ressources* ou *Gérer les informations d'identification manuellement*.
** Gérer les ressources
+
Si le système de fichiers FSx for ONTAP est authentifié, sélectionnez *Suivant*.



. Pour préparer (étape 3), assurez-vous que la ou les base(s) de données répond(ent) aux prérequis requis. Si tous les modules requis sont installés et que les prérequis sont remplis, sélectionnez *Suivant* pour enregistrer la base de données. Sinon, suivez ces étapes.
+
.. Examinez les prérequis dans la vue *Vérification des prérequis*.
+
Vous devez remplir toutes les conditions préalables pour une seule fonctionnalité comme *Examiner les problèmes et recommandations bien architecturés* pour enregistrer la base de données.

.. Sélectionnez *Détails de configuration* pour chaque fonctionnalité afin de connaître les prérequis de la fonctionnalité et suivez les instructions à l'écran pour compléter tout prérequis manquant pour une fonctionnalité.
+
Pour que Workload Factory link:optimize-configurations.html["examiner et corriger les problèmes bien architecturés"] pour vos bases de données, remplissez tous les prérequis énumérés sous les capacités *Examiner les problèmes et recommandations liés à une architecture correcte* et *Corriger les problèmes liés à une architecture correcte*.



. Une fois les prérequis remplis, *Enregistrez* la ou les base(s) de données.


.Résultat
L'enregistrement de la base de données commence. Sélectionnez l'onglet *Job monitoring* pour suivre la progression.

.Et la suite
Après l’enregistrement des ressources, vous pouvez effectuer les tâches suivantes.

* Afficher les bases de données de l'inventaire
* link:create-database.html["Créer une base de données"]
* link:create-sandbox-clone.html["Créer un clone de base de données (bac à sable)"]
* link:optimize-configurations.html["Mettre en œuvre des configurations de base de données bien architecturées"]

