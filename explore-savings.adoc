---
sidebar: sidebar 
permalink: explore-savings.html 
keywords: cost, savings, compare costs, EBS, FSx for Windows File Server, SQL Server on-premises, on-premises, FSx for ONTAP 
summary: 'Comparez les coûts liés à l"utilisation d"Amazon Elastic Block Store (EBS), de FSX pour serveur de fichiers Windows et du stockage de base de données sur site SQL Server avec le stockage FSX pour ONTAP.' 
---
= Découvrez les économies réalisées avec NetApp Workload Factory pour les bases de données
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Découvrez les économies réalisées dans NetApp Workload Factory for Databases pour vos charges de travail de base de données en comparant les coûts d'utilisation de Microsoft SQL Server sur Amazon Elastic Block Store (EBS), FSx pour Windows File Server et le stockage sur site avec FSx pour le stockage ONTAP .



== Description de la tâche

Workload Factory vous propose plusieurs méthodes pour explorer les économies réalisées sur vos charges de travail de base de données exécutées sur Amazon Elastic Block Store (EBS), FSx for Windows File Server et le stockage sur site : à partir du tableau de bord, de l'onglet Inventaire et de l'onglet Explorer les économies.  Dans tous les cas, vous pouvez utiliser le calculateur d'économies pour comparer différents composants de coût de l'exécution des charges de travail Microsoft SQL Server, comme le stockage, le calcul, la licence SQL, les instantanés et les clones pour vos charges de travail de base de données sur les systèmes de fichiers FSx for ONTAP par rapport à Elastic Block Store (EBS), FSx for Windows File Server et le stockage sur site.

Si Workload Factory détermine que vous pouvez économiser de l'argent en exécutant ces charges de travail sur un système de fichiers FSx for ONTAP , vous pouvez déployer Microsoft SQL sur FSx for ONTAP directement à partir du calculateur d'économies dans la console Workload Factory.  Lorsque vous disposez de plusieurs instances Microsoft SQL Server sur Elastic Block Store, FSx pour Windows File Server ou un stockage sur site, nous vous recommandons une configuration FSx pour ONTAP avec une seule instance SQL.

.Économies potentielles pour toutes les charges de travail de base de données
Visitez le *Tableau de bord* des bases de données dans la console Workload Factory pour obtenir un aperçu des économies de coûts potentielles liées à l'exécution de toutes vos charges de travail de base de données sur FSx for ONTAP.  Dans la mosaïque *Économies potentielles*, vous pouvez afficher le nombre de toutes les charges de travail de base de données dont vous disposez sur Elastic Block Store et FSx for Windows File Server, les économies de coûts potentielles, le pourcentage d'économies et la représentation visuelle dans le graphique à barres.

image:screenshot-dashboard-potential-savings-tile.png["Une capture d'écran de la mosaïque d'économies potentielles du tableau de bord des bases de données dans la console Workload Factory.  La mosaïque d'économies potentielles affiche le nombre de toutes les charges de travail de base de données dont vous disposez sur Elastic Block Store et FSx for Windows File Server, les économies de coûts potentielles, le pourcentage d'économies et la représentation visuelle dans le graphique à barres."]

.Calculateur d'économies
Vous pouvez utiliser le calculateur d'économies pour comparer les différents composants de coûts liés à l'exécution des workloads Microsoft SQL Server, par exemple le stockage, le calcul, la licence SQL, les snapshots et les clones pour vos workloads de base de données sur les systèmes de fichiers FSX pour ONTAP avec Elastic Block Store (EBS), FSX pour serveur de fichiers Windows et le stockage sur site. Selon vos besoins en stockage, vous constaterez peut-être que les systèmes de fichiers FSX pour ONTAP sont les plus économiques pour vos workloads de base de données.

Le calculateur indique si le stockage des workloads de base de données sur ces serveurs Microsoft SQL coûterait moins cher si vous utilisez un système de fichiers FSX pour ONTAP. <<Options de calculatrice,Apprenez à utiliser le calculateur.>>

image:screenshot-ebs-savings-calculator-update.png["Une capture d'écran de la page du calculateur d'économies montre la configuration Microsoft SQL Server sélectionnée sur Amazon Elastic Block Store à gauche avec l'option de personnalisation des valeurs de snapshot et de clone. Les économies réalisées en pourcentage et en montant, ainsi que le coût mensuel total pour l'utilisation de Microsoft SQL Server sur FSX pour ONTAP et du stockage Elastic Block Store s'affichent à gauche."]



== Analyse du déploiement de SQL Server

Le calculateur effectue une analyse complète de votre déploiement SQL Server afin de s'assurer que les ressources et les fonctionnalités utilisées sont adaptées à l'édition SQL Server. Voici les facteurs et conditions clés que le calculateur vérifie avant de recommander une mise à niveau vers l'édition Standard :

.Modèle de déploiement
Le calculateur évalue le modèle de déploiement et indique si l'édition Enterprise est requise.

.Ressources allouées
Le calculateur évalue les conditions des ressources allouées dépendant de la licence suivantes :

+ * vCPU de l'instance cible : l'instance dispose de 48 processeurs virtuels ou moins.  * Allocation de mémoire : l’instance dispose de 128 Go ou moins de mémoire.

.Utilisation des fonctionnalités d'entreprise
Le calculateur vérifie si l'une des fonctions Enterprise suivantes est utilisée :

+ * Fonctionnalités d'entreprise au niveau de la base de données * Opérations d'index en ligne * Gouverneur de ressources * Réplication peer-to-peer ou Oracle * Extensions R/Python * TempDB optimisée en mémoire

Si l'instance SQL Server évaluée n'utilise aucune des fonctionnalités d'entreprise ci-dessus et répond aux contraintes de ressources, la calculatrice recommande de rétrograder la licence vers l'édition Standard. Cette recommandation est faite pour vous aider à optimiser vos coûts de licence SQL Server sans compromettre les performances ou les fonctionnalités.



== Options de calculatrice

Deux options de calculateur sont disponibles pour établir une comparaison des coûts entre vos systèmes et FSX for ONTAP — personnalisation et détection.

Explorer les économies via la personnalisation : vous fournissez les paramètres de configuration de Microsoft SQL Server sur Amazon EC2 avec EBS ou FSX pour Windows File Server, notamment la région, le modèle de déploiement, l'édition SQL Server, le taux de modification mensuel des données, la fréquence des snapshots et bien plus encore.

Explorez les économies possibles pour les hôtes détectés : Workload Factory se connecte à vos serveurs Microsoft SQL existants et importe les détails dans le calculateur pour une comparaison automatique. Vous devrez accorder les autorisations de _visualisation, de planification et d'analyse_ pour utiliser cette option de calculatrice. Vous pouvez modifier le cas d'utilisation, mais tous les autres détails sont automatiquement déterminés dans le calcul.

En outre, vous pouvez link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["Ajoutez des identifiants AWS"^]améliorer la précision de l'analyse de la calculatrice. Sélectionnez *calculer les économies en fonction des ressources existantes*. Vous serez redirigé vers la page Ajouter des informations d'identification. Après avoir ajouté des informations d'identification, sélectionnez les ressources existantes à comparer avec FSX pour ONTAP, puis sélectionnez *Explorer les économies*.



=== Explorer les économies via la personnalisation

Suivez les étapes de l'onglet correspondant à votre type de stockage.

[role="tabbed-block"]
====
.Amazon Elastic Block Store (EBS)
--
.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Dans les bases de données, sélectionnez *Explorer les économies* puis *Microsoft SQL Server sur EBS*.
. Dans le calculateur d'économies, fournissez les informations suivantes :
+
.. *Région* : sélectionnez une région dans le menu déroulant.
.. *Modèle de déploiement* : sélectionnez un modèle de déploiement dans le menu déroulant.
.. *Edition SQL Server* : sélectionnez l'édition SQL Server dans le menu déroulant.
.. *Taux mensuel de modification des données (%)* : saisissez le pourcentage de changements des données de clonage et d'instantané en moyenne par mois.
.. *Fréquence d'instantané* : sélectionnez une fréquence d'instantané dans le menu déroulant.
.. *Nombre de copies clonées* : entrez le nombre de copies clonées dans la configuration EBS.
.. *Coût mensuel de SQL BYOL ($)* : vous pouvez éventuellement saisir le coût mensuel de SQL BYOL en dollars.
.. Selon les spécifications EC2, fournir les éléments suivants :
+
*** *Description de la machine* : si vous le souhaitez, entrez un nom pour décrire la machine.
*** *Type d'instance* : sélectionnez le type d'instance EC2 dans le menu déroulant.


.. Sous types de volume, fournissez les détails suivants pour au moins un type de volume. Les IOPS et le débit s'appliquent à certains volumes de type de disque.
+
*** *Nombre de volumes*
*** *Quantité de stockage par volume (Gio)*
*** *IOPS provisionnées par volume*
*** *Débit Mo/s*


.. Si vous avez sélectionné le modèle de déploiement disponibilité permanente, fournissez des détails sur *les spécifications EC2 secondaires* et *les types de volume*.




--
.Amazon FSX pour serveur de fichiers Windows
--
.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Dans bases de données, sélectionnez *Explorer les économies* puis *Microsoft SQL Server sur FSX pour Windows*.
. Dans le calculateur d'économies, fournissez les informations suivantes :
+
.. *Région* : sélectionnez une région dans le menu déroulant.
.. *Modèle de déploiement* : sélectionnez un modèle de déploiement dans le menu déroulant.
.. *Edition SQL Server* : sélectionnez l'édition SQL Server dans le menu déroulant.
.. *Taux mensuel de modification des données (%)* : saisissez le pourcentage de changements des données de clonage et d'instantané en moyenne par mois.
.. *Fréquence d'instantané* : sélectionnez une fréquence d'instantané dans le menu déroulant.
.. *Nombre de copies clonées* : entrez le nombre de copies clonées dans la configuration EBS.
.. *Coût mensuel de SQL BYOL ($)* : vous pouvez éventuellement saisir le coût mensuel de SQL BYOL en dollars.
.. Sous les paramètres du serveur de fichiers FSX pour Windows, fournissez les informations suivantes :
+
*** *Type de déploiement* : sélectionnez le type de déploiement dans le menu déroulant.
*** *Type de stockage* : le stockage SSD est le type de stockage pris en charge.
*** *Capacité de stockage totale* : saisissez la capacité de stockage et sélectionnez l'unité de capacité pour la configuration.
*** *IOPS SSD provisionnées* : entrez les IOPS SSD provisionnées pour la configuration.
*** *Débit (Mo/s)* : entrez le débit en Mo/s.


.. Sous spécifications EC2, sélectionnez *Type d'instance* dans le menu déroulant.




--
====
Après avoir fourni des détails sur la configuration de l'hôte de votre base de données, consultez les calculs et les recommandations fournis sur la page.

De plus, faites défiler jusqu'au bas de la page pour afficher le rapport en sélectionnant l'une des options suivantes :

* *Exporter PDF*
* *Envoyer par courriel*
* *Afficher les calculs*


Pour passer à FSX pour ONTAP, suivez les instructions à <<Déployez Microsoft SQL Server sur AWS EC2 à l'aide de FSX pour ONTAP,Déployez Microsoft SQL Server sur AQS EC2 à l'aide des systèmes de fichiers FSX pour ONTAP>>.



=== Découvrez les économies réalisées pour les hôtes détectés

Workload Factory saisit les caractéristiques détectées de l'hôte Elastic Block Store et FSx for Windows File Server afin que vous puissiez explorer automatiquement les économies.

.Avant de commencer
Avant de commencer, remplissez les conditions préalables suivantes :

* link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["Accorder les autorisations de _consultation, de planification et d'analyse_"^] dans votre compte AWS pour détecter les systèmes Elastic Block Store (EBS) et FSx pour Windows sous l'onglet *Explorer les économies* et pour afficher le calcul des économies dans le calculateur d'économies.
* Pour obtenir des recommandations de type d’instance et améliorer la précision des coûts, procédez comme suit :
+
.. Accordez les autorisations Amazon CloudWatch et AWS Compute Optimizer.
+
... Connectez-vous à la console de gestion AWS et ouvrez le service IAM.
... Modifiez la stratégie du rôle IAM. Copiez et ajoutez les autorisations Amazon CloudWatch et AWS Compute Optimizer suivantes.
+
[source, json]
----
{
"Version": "2012-10-17",
"Statement": [
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEnrollmentStatus",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:PutRecommendationPreferences",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEffectiveRecommendationPreferences",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEC2InstanceRecommendations",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "autoscaling:DescribeAutoScalingGroups",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "autoscaling:DescribeAutoScalingInstances",
   "Resource": "*"
  }
]
}
----


.. Activez le compte AWS facturable dans AWS Compute Optimizer.




Suivez les étapes de l'onglet correspondant à votre type de stockage.

[role="tabbed-block"]
====
.Amazon Elastic Block Store (EBS)
--
.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Dans la mosaïque Bases de données, sélectionnez *Explorer les économies* puis *Microsoft SQL Server sur FSx pour Windows* dans le menu.
+
Si Workload Factory détecte des hôtes EBS, vous serez redirigé vers l'onglet Explorer les économies.  Si Workload Factory ne détecte pas les hôtes EBS, vous serez redirigé vers la calculatrice pour<<Explorer les économies via la personnalisation,explorer les économies via la personnalisation>> .

. Dans *Explorer les économies*, sélectionnez un ou plusieurs hôtes de base de données exécutés sur EBS, puis sélectionnez *Explorer les économies*.
. Si nécessaire, authentifiez l’hôte de la base de données avec les informations d’identification SQL Server, les informations d’identification Windows ou en ajoutant les autorisations SQL Server manquantes.
+
Si la page Explorer les économies ne charge pas les données après une authentification réussie, sélectionnez l'onglet *Inventaire* pour recharger les données, puis sélectionnez à nouveau l'onglet *Explorer les économies*.

. Dans le calculateur d'économies, en option, fournissez les informations suivantes sur les clones et les copies Snapshot de votre stockage EBS pour une estimation plus précise des économies réalisables.
+
.. *Fréquence d'instantané* : sélectionnez une fréquence d'instantané dans le menu.
.. *Fréquence d'actualisation du clonage* : sélectionnez la fréquence d'actualisation des clones dans le menu.
.. *Nombre de copies clonées* : entrez le nombre de copies clonées dans la configuration EBS.
.. *Taux de modification mensuel* : saisissez le pourcentage de changements de données de clonage et d'instantanés en moyenne par mois.
.. *Ajouter des hôtes* : Vous pouvez sélectionner jusqu’à cinq hôtes EBS détectés à inclure dans le calcul des économies.
+
Workload Factory consolide plusieurs hôtes SQL Server en une seule recommandation de configuration FSx pour ONTAP afin d'optimiser les économies de coûts, sauf si les hôtes EBS sélectionnés dépassent les limites de débit, de capacité ou d'IOPS pour un seul système de fichiers FSx pour ONTAP .





--
.Amazon FSX pour serveur de fichiers Windows
--
.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Dans la mosaïque Bases de données, sélectionnez *Explorer les économies* puis *Microsoft SQL Server sur FSx pour Windows* dans le menu.
+
Si Workload Factory détecte les hôtes FSx pour Windows, vous serez redirigé vers l'onglet Explorer les économies.  Si Workload Factory ne détecte pas les hôtes FSx pour Windows, vous serez redirigé vers la calculatrice pour<<Explorer les économies via la personnalisation,explorer les économies via la personnalisation>> .

. Dans l’onglet Explorer les économies, sélectionnez *Explorer les économies* de l’hôte de base de données utilisant FSx pour le stockage Windows File Server.
. Si nécessaire, authentifiez l’hôte de la base de données avec les informations d’identification SQL Server, les informations d’identification Windows ou en ajoutant les autorisations SQL Server manquantes.
+
Si la page Explorer les économies ne charge pas les données après une authentification réussie, sélectionnez l'onglet *Inventaire* pour recharger les données, puis sélectionnez à nouveau l'onglet *Explorer les économies*.

. Dans le calculateur d'économies, éventuellement, fournissez les informations suivantes sur les clones (clichés instantanés) et les snapshots dans votre stockage FSX pour Windows afin d'obtenir une estimation plus précise des économies.
+
.. *Fréquence d'instantané* : sélectionnez une fréquence d'instantané dans le menu.
+
Si des clichés instantanés FSX pour Windows sont détectés, la valeur par défaut est *Daily*. Si les clichés instantanés ne sont pas détectés, la valeur par défaut est *pas de fréquence d'instantanés*.

.. *Fréquence d'actualisation du clonage* : sélectionnez la fréquence d'actualisation des clones dans le menu.
.. *Nombre de copies clonées* : entrez le nombre de copies clonées dans la configuration FSX pour Windows.
.. *Taux de modification mensuel* : saisissez le pourcentage de changements de données de clonage et d'instantanés en moyenne par mois.




--
.Microsoft SQL Server sur site
--
.Étapes
. Connectez-vous à l'aide de l'un des link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^].
. Dans la mosaïque Bases de données, sélectionnez *Explorer les économies* puis *Microsoft SQL Server sur site* dans le menu.
. Dans l'onglet sur site de SQL Server, téléchargez le script pour évaluer vos environnements SQL Server sur site.
+
.. Téléchargez le script d'évaluation.  Le script est un outil de collecte de données basé sur PowerShell.  Il collecte puis télécharge les données de configuration et de performances de SQL Server vers Workload Factory.  Le conseiller en migration évalue les données et planifie le déploiement de FSx pour ONTAP pour votre environnement SQL Server.
+
image:screenshot-download-script-on-premises.png["Une capture d'écran de l'onglet sur site de SQL Server montre l'option de téléchargement du script d'évaluation."]

.. Exécutez le script sur l'hôte SQL Server.
.. Téléchargez la sortie du script dans l’onglet SQL Server sur site dans Workload Factory.
+
image:screenshot-upload-script-on-premises.png["Une capture d'écran de l'onglet sur site de SQL Server montre l'option de téléchargement du script d'évaluation."]



. Dans l'onglet SQL Server sur site, sélectionnez *Explorer les économies* pour exécuter une analyse des coûts de l'hôte SQL Server sur site par rapport à FSX pour ONTAP.
. Dans le calculateur d'économies, sélectionnez la région de l'hôte sur site.
. Pour des résultats plus précis, mettez à jour les informations de calcul et les informations sur le stockage et les performances.
. Éventuellement, fournissez les informations suivantes sur les clones (clichés instantanés) et les snapshots dans votre environnement de base de données sur site pour une estimation plus précise des économies réalisables.
+
.. *Fréquence d'instantané* : sélectionnez une fréquence d'instantané dans le menu.
+
Si des clichés instantanés FSX pour Windows sont détectés, la valeur par défaut est *Daily*. Si les clichés instantanés ne sont pas détectés, la valeur par défaut est *pas de fréquence d'instantanés*.

.. *Fréquence d'actualisation du clonage* : sélectionnez la fréquence d'actualisation des clones dans le menu.
.. *Nombre de copies clonées* : entrez le nombre de copies clonées dans la configuration sur site.
.. *Taux de modification mensuel* : saisissez le pourcentage de changements de données de clonage et d'instantanés en moyenne par mois.




--
====
Après avoir fourni des détails sur la configuration de l'hôte de votre base de données, consultez les calculs et les recommandations fournis sur la page.

De plus, faites défiler jusqu'au bas de la page pour afficher le rapport en sélectionnant l'une des options suivantes :

* *Exporter PDF*
* *Envoyer par courriel*
* *Afficher les calculs*


Pour passer à FSX pour ONTAP, suivez les instructions à <<Déployez Microsoft SQL Server sur AWS EC2 à l'aide de FSX pour ONTAP,Déployez Microsoft SQL Server sur AQS EC2 à l'aide des systèmes de fichiers FSX pour ONTAP>>.

.Retrait d'hôte sur site
Après avoir exploré les économies réalisées sur un hôte Microsoft SQL Server sur site, vous avez la possibilité de supprimer l’enregistrement de l’hôte sur site de Workload Factory.  Sélectionnez le menu d’action de l’hôte local Microsoft SQL Server, puis sélectionnez *Supprimer*.



== Déployez Microsoft SQL Server sur AWS EC2 à l'aide de FSX pour ONTAP

Si vous souhaitez passer à FSX pour ONTAP pour réaliser des économies, cliquez sur *Créer* pour créer la ou les configurations recommandées directement à partir de l'assistant Créer un nouveau serveur Microsoft SQL ou cliquez sur *Enregistrer* pour enregistrer la ou les configurations recommandées ultérieurement.


NOTE: Workload Factory ne prend pas en charge l'enregistrement ou la création de plusieurs systèmes de fichiers FSx pour ONTAP .

.Méthodes de déploiement
Avec les _autorisations de création d'hôte de base de données_, vous pouvez déployer le nouveau serveur Microsoft SQL sur AWS EC2 en utilisant FSx pour ONTAP directement depuis Workload Factory. Vous pouvez également copier le contenu de la fenêtre Codebox et déployer la configuration recommandée en utilisant l'une des méthodes Codebox.

Sans autorisation, vous pouvez copier le contenu de la fenêtre Codebox et déployer la configuration recommandée en utilisant l'une des méthodes Codebox.

.Informations connexes
link:https://docs.netapp.com/us-en/workload-setup-admin/permissions-reference.html["Référence des autorisations de Workload Factory"^]
